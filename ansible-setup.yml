---
- hosts: localhost
  become: yes

  tasks:
    - name: Add keys for repos
      apt_key:
        url: "{{ item }}"
      with_items:
        - https://packages.cloud.google.com/apt/doc/apt-key.gpg
        - https://packages.microsoft.com/keys/microsoft.asc

    - name: Add external repos
      apt_repository:
        repo: "{{ item }}"
      with_items:
        - deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main
        - deb https://packagecloud.io/slacktechnologies/slack/debian/ jessie main
        - deb https://apt.kubernetes.io/ kubernetes-xenial main

    - name: Install required apps
      apt:
        name: "{{ packages }}"
        update_cache: yes
      vars:
        packages:
        - apt-transport-https
        - code
        - git
        - htop
        - iftop
        - iotop
        - fonts-powerline
        - kubectl
        - lnav
        - meld
        - pep8
        - pylint
        - shellcheck
        - sysstat
        - tmux
        - vim
        - zsh
